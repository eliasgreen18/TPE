\documentclass[a4paper]{article}
\input{Algo1Macros}

\usepackage{a4wide}
\usepackage{amsmath, amscd, amssymb, amsthm, latexsym}
\usepackage[spanish,activeacute]{babel}
\usepackage{enumerate}

\setlength{\parskip}{0.1em}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex

\begin{document}
	
	\titulo{TP de Especificación}
	\subtitulo{Juego de la vida toroidal}
	\fecha{\today}
	\materia{Algoritmos y Estructuras de Datos I}
	\grupo{Grupo: Compubiólogos}
	
	\newcommand{\senial}{\textit{se\~nal}}
	
	\integrante{Cerdeira, Elías Nahuel}{692/12}{ecerdeira@dc.uba.ar}
	\integrante{Rodriguez Ferrante, Guadalupe}{60/12}{guadarodriguezf@gmail.com}
	
	\maketitle
	
	% Haciendo un Índice (?)
	\tableofcontents
	\clearpage
	
	\section{Problemas}
    	\subsection{Problema 1}
    	
    	\begin{proc}{esValido}{\In t: $toroide$, \Out result: $\bool$}{}
    		\pre{\True}
    		\post{result = \True \iff valido(t) }
    	\end{proc} \\
    	
    	\subsection{Problema 2}
	
    	\begin{proc}{posicionesVivas}{\In t: $toroide$, \Out result: \TLista{\ent\times\ent}}{}
    		\pre{valido(t)}
    		\post{\longitud{result}=cantVivas(t) \land noRepetidos(result) \land (\forall i:\ent) ((enRango(i,result) \implicaLuego (enRangoFilas(result[i][0],t) \land enRangoColumnas(result[i][1],t) ) \yLuego  estaViva(t[result[i][0]][result[i][1]])))}
	    \end{proc} \\
	    
	    \subsection{Problema 3}
	
	    \begin{proc}{densidadPoblacion}{\In t: $toroide$, \Out result: \rea}{}
		    \pre{valido(t)}
		    \post{result = cantVivas(t)/posicionesTotales(t)}
	    \end{proc} \\
	    
	    \subsection{Problema 4}
	    
	    \begin{proc}{evolucionDePosicion}{\In t: $toroide$, \In posicion: \ent \times \ent, \Out result: $\bool$}{}
		    \pre{valido(t) \yLuego (enRango(posicion[0],t) \land enRango(posicion[1],t[0])}
		    \post{result = posicionModificada(t, posicion)}
	    \end{proc} \\
	    
	    \subsection{Problema 5}
	    
	    \begin{proc}{evolucionToroide}{\Inout t: $toroide$}{}
		    \pre{valido(t) \land t=T0}
		    \post{toroideModificadoUnTick(T0, t)}
	    \end{proc} \\
	    
	    \subsection{Problema 6}
	    
	    \begin{proc}{evolucionMultiple}{\In t: $toroide$, \In k: \ent, \Out result: $toroide$}{}
    		\pre{valido(t) \land esNatural(k)}
    		\post{toroideModificadoMultiplesVeces(t, result, k)}
    	\end{proc} \\
    	
    	\subsection{Problema 7}
    	
    	\begin{proc}{esPeriodico}{\In t: $toroide$, \Inout p: \ent, \Out result: \bool}{}
    		\pre{valido(t) \land p = P0}
    		\post{result = \True \iff (\exists k: \ent)(esNatural(k) \land toroideModificadoMultiplesVeces(t,t,k) \land \paraTodo{j}{(1}{k} \implicaLuego \neg (toroideModificadoMultiplesVeces(t,t,j)) \land p = k)) } 
    	\end{proc} \\
    	
    	\subsection{Problema 8}
    	
    	\begin{proc}{primosLejanos}{\In t1: $toroide$, \In t2: $toroide$, out primos: \bool}{}
    		\pre{valido(t1) \land valido(t2)}
    		\post{primos = \True \iff (\exists k:\ent)(esNatural(k) \land (toroideModificadoMultiplesVeces(t1, t2, k) \lor toroideModificadoMultiplesVeces(t2, t1 , k) ))}
    	\end{proc} \\
    	
    	\subsection{Problema 9}
    	
    	\begin{proc}{seleccionNatural}{\In ts: \TLista{$toroide$}, \Out res: \ent}{}
    		\pre{todosValidos(ts)}
    		\post{enRango(res, ts) \yLuego (pertenece(ts, ts[res]) \land ((\exists i:\ent)(enRango(i,ts) \yLuego (toroideInmortal(ts[i]) \land res = i)) \lor (\forall j:\ent)(enRango(j,ts) \implicaLuego (\exists k: \ent) (esNatural(k) \yLuego TicksParaMorir(t[j], k) \land (\exists h : \ent)(TicksParaMorir(t[res]), h \land h \leq k))))) }
    	\end{proc} \\ 
    	
    	% ELÍAS: Acá donde dice "ticksParaMorir(t[res])" me queda la duda cómo es ese "exists" porque hay una coma con una h. No entiendo si faltan paréntesis. REVISAR.
    	
    	\subsection{Problema 10}
    	
    	\begin{proc}{fusionar}{\In t1: $toroide$, \In t2: $toroide$, \Out res: $toroide$}{}
    		\pre{valido(t1) \land valido(t2) \land mismasDimensiones(t1,t2)}
    		\post{(\forall i:\ent)(enRangoFilas(i,t1) \implicaLuego (\forall j:\ent)(enRangoColumnas(j,t1) \implicaLuego (estaViva(res,i,j)=(estaViva(t1,i,j)) \land estaViva(t2,i,j))))}
    	\end{proc} \\
    	
    	\subsection{Problema 11}
	
	    \begin{proc}{vistaTrasladada}{\In t1: $toroide$, \In t2: $toroide$, \Out res: \bool}{}
    		\pre{valido(t1) \land valido(t2) \land mismasDimensiones(t1,t2)}
    		\post{res = \True \iff (\forall i : \ent)(enRangoFilas(i,t1) \implicaLuego (\forall j : \ent)(enRangoColumnas(j,t1) \implicaLuego (\exists a : \ent)(enRangoFilas(a,t1) \yLuego (\exists b : \ent)(enRangoColumnas(b,t1) \yLuego (estaViva(t1,i,j)=estaViva(t2,corregirPosicionFila(i+a),corregirPosicionColumna(j+b)) ) ) ) ) )}
    	\end{proc} \\
    	
    	\subsection{Problema 12}
    	
    	\begin{proc}{enCrecimiento}{\In t: $toroide$, \Out res: \bool}{}
    		\pre{valido(t)}
    		\post{res = \True \iff (\exists t2 : $toroide$)(mismasDimensiones(t, t2) \yLuego (toroideModificadoUnTick(t, t2) \land cantVivas(t)<cantVivas(t2)))}
    	\end{proc} 
	
	\section{Auxiliares}
	
    	\subsection{Predicados} \vspace{1em}
	
        	\auxpred {valido}{t:$toroide$}{\longitud{t}>0 \land (\forall i:\ent)(enRangoFilas(i,t) \implicaLuego (\forall j:\ent)(enRangoFilas(j,t) \implicaLuego (\longitud{t[i]}>0 \land mismaCantidadColumnas(t,i,j) ) ) )} \\
        	
        	\auxpred{enRango}{i:\ent, s:\TLista{T}}{ 0 \leq i < \longitud{s}} \\
        	
	        \auxpred{enRangoFilas}{i:\ent, t:$toroide$}{ 0 \leq i < \longitud{s}} \\
	        
	        \auxpred{enRangoColumnas}{j:\ent, t:$toroide$}{ 0 \leq j < \longitud{s[0]}} \\
        	
        	\auxpred{mismaCantidadColumnas}{t:$toroide$, i:\ent, j:\ent}{\longitud{t[i]}=\longitud{t[j]}} \\
	        
	        \auxpred{estaViva}{t:$toroide$, i:\ent, j:\ent}{t[i][j]=\True} \\
	
        	\auxpred {noRepetidos}{t:$toroide$}{(\forall i:\ent)(enRango(i,t) \implicaLuego (\forall j:\ent)((enRango(j,t) \land i \ne j) \implicaLuego t[i] \ne t[j] ) )} \\

        	\auxpred{posicionModificada}{t: $toroide$, posicion: \ent \times \ent}{\IfThenElse{estaViva(t,posicion[0],posicion[1])}{siVivaLuego(t, posicion)}{siMuertaLuego(t, posicion)}} \\
        	
        	\auxpred{siVivaLuego}{t: $toroide$, posicion: \ent \times \ent}{2 \leq cantVecinasVivas(t, posicion) \leq 3} \\
        	
        	\auxpred{siMuertaLuego}{t: $toroide$, posicion: \ent \times \ent}{cantVecinasVivas(t, posicion)=3} \\
        	
        	\auxpred{toroideModificadoUnTick}{t1: $toroide$, t2: $toroide$}{(\forall i:\ent)(enRangoFilas(i,t) \implicaLuego (\forall j:\ent) (enRangoColumnas(j,t) \implicaLuego t2[i][j]=posicionModificada(t1, (i, j))))} \\
        	
        	\auxpred{esNatural}{n:\ent}{n>0} \\
        	
        	\auxpred{toroideModificadoMultiplesVeces}{t1: $toroide$, t2: $toroide$, k: \ent}{(\exists ts: \TLista{$toroide$})(\longitud{ts} = k+1 \yLuego (t2 = ts[k] \land t1= ts[0] \land  (\forall i : \ent)(0 \leq i < k \implicaLuego toroideModificadoUnTick(ts[i],ts[i+1]) ) ) )} \\
        	
        	\auxpred{toroideInmortal}{t : $toroide$}{\exists tm:$toroide$)((mismasDimensiones(t, tm) \land tableroMuerto(tm)) \yLuego (\forall k:\ent) (esNatural(k) \implicaLuego \neg toroideModificadoMultiplesVeces(t, tm, k))} \\
        	
        	\auxpred{TicksParaMorir}{t : $toroide$, k: \ent}{\exists tm:$toroide$)((mismasDimensiones(t, tm) \land tableroMuerto(tm)) \yLuego toroideModificadoMultiplesVeces(t, tm, k) \land \paraTodo{j}{(1}{k} \implicaLuego \neg (toroideModificadoMultiplesVeces(t,tm,j))} \\
        	
        	\auxpred{mismasDimensiones}{t1: $toroide$, t2: $toroide$}{mismaCantidadFilas(t1,t2) \land  mismaCantidadColumnas(t1,t2)} \\
        	
            \auxpred{mismaCantidadFilas}{t1: $toroide$, t2: $toroide$}{cantidadFilas(t1) = cantidadFilas(t2)} \\
        	
        	\auxpred{mismaCantidadColumnas}{t1: $toroide$, t2: $toroide$}{cantidadColumnas(t1) = cantidadColumnas(t2)} \\
        	
        	\auxpred{todosValidos}{ts:\TLista{$toroide$}}{(\forall i:\ent)(enRango(i,ts) \implicaLuego valido(ts[i]) )} \\
        	
        	\auxpred{pertenece}{ts:\TLista{$toroide$}, t: $toroide$}{(\exists i: \ent)(enRango(i, ts) \yLuego t=ts[i]))} \\
        	
        	\auxpred{tableroVivo}{t:$toroide$}{(\exists i:\ent)(enRangoFilas(i,t) \yLuego (\exists j:\ent)(enRangoColumnas(j,t) \yLuego estaViva(t,i,j) ) )} \\
	
	        \auxpred{tableroMuerto}{t:$toroide$}{\neg tableroVivo(t)}
	
        \subsection{Funciones Auxiliares} \vspace{1em}
	
            \aux{cantVivas}{t:$toroide$}{\ent}{\sum_{i=0}^{\longitud{t}-1}\sum_{j=0}^{\longitud{t[i]}-1}\IfThenElse{estaViva(t,i,j)}{1}{0}} \vspace{1em}
      	
            \aux{cantVecinasVivas}{t:$toroide$, posicion :\ent \times \ent}{\ent}{\sum_{i=-1}^{1}\sum_{j=-1}^{1}\IfThenElse{(j \ne 0 \land i \ne 0) \land estaViva(t, (posicion[0]+(i \mod \longitud{t})),(posicion[1]+(j \mod \longitud{t})))}{1}{0}} \vspace{1em}
	
            \aux{posicionesTotales}{t:$toroide$}{\ent}{\longitud{t} \times \longitud{t[0]}} \vspace{1em}
        
            \aux{cantidadFilas}{t:$toroide$}{\ent}{\longitud{t}} \vspace{1em}
        
            \aux{cantidadColumnas}{t:$toroide$}{\ent}{\longitud{t[0]}} \vspace{1em}
            
            \aux{corregirPosicionFila}{t:$toroide$,i:\ent}{\ent}{i \bmod cantidadFilas(t)} \vspace{1em}
            
            \aux{corregirPosicionColumna}{t:$toroide$,j:\ent}{\ent}{j \bmod cantidadColumnas(t)} \vspace{1em}

\end{document}